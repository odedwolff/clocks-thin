




<!doctype html>

<html lang="en">
    <head>
        <meta charset="utf-8">

        <title>The HTML5 Herald</title>
        <meta name="description" content="The HTML5 Herald">
        <meta name="author" content="SitePoint">

        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <link rel="stylesheet" href="p1.css">


        <script src="elm_rendrers.js"></script>
        <!--[if lt IE 9]>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
              
        <![endif]-->
    </head>

    <body>
        <!--  <script src="js/scripts.js"></script>  -->

        <div id = root>
            <div id = buttonsPanel1>
                <button id=start class="controlButton">start</button>
                <button id=start2 class="controlButton">start2</button>
                <button id=startCrossAllOut class="controlButton">cross all out</button>
                <button id=stop	 class="controlButton">stop</button>
                <button id=next class="controlButton">next</button>
                <button id=prev	 class="controlButton">prev</button>

            </div>

            <div id = svgCont>
                <div id = panel4	class = panelCls>
                    <svg id=svg1 class="gridCell1" viewBox="0 0 800 800" preserveAspectRatio="none">
                    </svg>
                </div>
            </div>
        </div>


        <script>

            var interval;
            var ticksPerSec = 11;
            var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            var svgNS = svg.namespaceURI;

            var msIn1Min = 1000 * 60;

            var rect = document.createElementNS(svgNS, 'rect');
            rect.setAttribute('x', 5);
            rect.setAttribute('y', 30);
            rect.setAttribute('width', 70);
            rect.setAttribute('height', 40);
            rect.setAttribute('fill', 'red');


            function testAddCirclesArray(startLoc, spacing, radius, numInstances) {
                for (var i = 0; i < numInstances; i++) {
                    var circle = document.createElementNS(svgNS, 'circle');
                    circle.setAttribute('cx', startLoc[0] + i * spacing);
                    circle.setAttribute('cy', startLoc[1]);
                    circle.setAttribute('fill', 'red');
                    circle.setAttribute('r', radius);

                }
            }

            //returns a function of x
            function gausian(a, b, c) {
                var f = function (x) {
                    return 1.0 * a * Math.exp(-1.0 * Math.pow((x - b), 2)) / (2 * Math.pow(c, 2));
                }
                return f;
            }


            //cos(​t)*​1/​(6+​(t/​2)^​2)
            //decay must be integer !!
            function fCustom1(scaleX, scaleY, decay) {
                var f = function (x) {
                    x = x * scaleX;
                    //x = Math.abs(x);
                    return scaleY * Math.cos(x) / (6 + Math.pow(x / 2, decay));
                    //return scaleY * Math.cos(x) / (6  + (Math.pow(x/2, decay))); 
                }
                return f;
            }


            //return white regardless of angle 	
            function constantWhite(angle, currentTimeMilli) {
                return "red";
            }


            /**
             * renders a Seconds dial for given offset and given projected function 
             * the passed time does not affect the porjection of the function, that is, the computed locaiton 
             * of elements, but it is being passed on to the function that renders the elemnts, thus allowes for 
             * instance to mark the seconds and minutes hands by coloring their corresponing elemnts 
             * **/
            function pojectFunctionOnRadCrd(panelName, center, numSections, outerRadius, f, zoomX, zoomY, offsetAngleRad, circElmFnc, currentTime) {
                colorsPointer = 0;
                var angle = 0;
                for (var i = 0; i < numSections; i++) {
                    //the angular distance of currently rendered angle from the offset (offset is the center of the projected
                    //function) 
                    var angDist = sharpAngel(angle - offsetAngleRad) * zoomX;
                    var addedRad = f(angDist);
                    var x = center[0] + Math.cos(angle) * outerRadius * (1 + zoomY * addedRad);
                    var y = center[1] + Math.sin(angle) * outerRadius * (1 + zoomY * addedRad);
                    angle += 2 * Math.PI / numSections;
                    var circle = circElmFnc(angle, currentTime);
                    circle.setAttribute('cx', x);
                    circle.setAttribute('cy', y);
                    $("#" + panelName).append(circle);
                }
            }


            function sharpAngel(angle) {

                angle = angle % (2 * Math.PI);
                if (angle > Math.PI) {
                    return  -1 * (2 * Math.PI - angle);
                }
                if (angle < -Math.PI) {
                    return  (2 * Math.PI + angle);
                }
                return angle;

            }


            function startTickingFCst1CheckClock(numPracitalPerSecond, panelName) {

                var tick = function () {
                    var d = new Date();
                    var curruentSecProp;
                    var time;
                    d = new Date();
                    time = d.getTime();
                    curruentSecProp = (time % (1000 * 60)) / (1000 * 60);
                    $("#" + panelName).empty();
                    var f = fCustom1(/*scaleX*/4.0, /*scaleY*/33.0, /*decay*/ 2);

                    var dsnParmats = {
                        radiusNormal: 2,
                        radiusFullHr: 4,
                        mnClr: "#EC6F00",
                        hrClr: "#830000",
                        dfltClr: "#FFFFFF"
                    };

                    fElmGenerator = fCircElmColorHrSec.bind(dsnParmats);

                    pojectFunctionOnRadCrd(/*panelName */panelName, /*center */[450, 400],
                            /*numSections*/ 250, /*outerRadius*/250, /*projected fnc*/f,
                            /*zoomX*/8.0, /*zoomY*/ 0.02, /*offsetAngleRad*/ Math.PI * 2 * curruentSecProp - Math.PI / 2,
                            /*circElmFnc*/fElmGenerator, /*time*/ d);

                };
                return setInterval(tick, 1000 / numPracitalPerSecond);
            }


            function startTicking3porjections(numPracitalPerSecond, panelName,
                    fRenderHr, fRenderMin, fRenderSec) {

                var tick = function () {
                    var d = new Date();
                    $("#" + panelName).empty();
                    fRenderHr(d);
                    fRenderMin(d);
                    fRenderSec(d);


                };
                return setInterval(tick, 1000 / numPracitalPerSecond);
            }

            function start3CirclesTicking(numPracitalPerSecond, panelName) {


                //parameters for Hour elment rendering  
                var dsnParmasHr = {
                    color: "#FFFFFF",
                    radius: 1
                };
                //function fer rendering hour elements 
                var fElmGeneratorHr = fElmConstant.bind(dsnParmasHr);


                var fRenderHr = function (dateTimeInfo) {
                    var currentMinProp = dateTimeInfo.getMinutes() / 60;
                    var currentHRProp = dateTimeInfo.getHours() / 12 + currentMinProp / 12;
                    var f = fCustom1(/*scaleX*/4.0, /*scaleY*/33.0, /*decay*/ 2);

                    pojectFunctionOnRadCrd(/*panelName */panelName, /*center */[450, 400],
                            /*numSections*/ 250, /*outerRadius*/ 78, /*projected fnc*/f,
                            /*zoomX*/8.0, /*zoomY*/ 0.02, /*offsetAngleRad*/ Math.PI * 2 * currentHRProp - Math.PI / 2,
                            /*circElmFnc*/fElmGeneratorHr, /*time*/ dateTimeInfo);

                };

                //minutes elements parameters
                var dsnParmasMn = {
                    color: "#FFFFFF",
                    radius: 2
                };
                //minutes element rendering funciton 
                var fElmGeneratorMin = fElmConstant.bind(dsnParmasMn);

                var fRenderMin = function (dateTimeInfo) {

                    var currentMinProp = dateTimeInfo.getMinutes() / 60;
                    var f = fCustom1(/*scaleX*/4.0, /*scaleY*/33.0, /*decay*/ 2);

                    pojectFunctionOnRadCrd(/*panelName */panelName, /*center */[450, 400],
                            /*numSections*/ 250, /*outerRadius*/ 150, /*projected fnc*/f,
                            /*zoomX*/8.0, /*zoomY*/ 0.02, /*offsetAngleRad*/ Math.PI * 2 * currentMinProp - Math.PI / 2,
                            /*circElmFnc*/fElmGeneratorMin, /*time*/ dateTimeInfo);

                };

                
                //seconds element parameters
                var dsnParmatsSec = {
                    radiusNormal: 2,
                    radiusFullHr: 4,
                    dfltClr: "#FFFFFF"
                };
                //seconds element rendering function 
                
                fElmGeneratorSec = fCircElmNoColorHrSec.bind(dsnParmatsSec);
                var fRenderSec = function (dateTimeInfo) {

                    var curruentSecProp = (dateTimeInfo.getTime() % msIn1Min) / msIn1Min;
                    var f = fCustom1(/*scaleX*/4.0, /*scaleY*/33.0, /*decay*/ 2);

                    pojectFunctionOnRadCrd(/*panelName */panelName, /*center */[450, 400],
                            /*numSections*/ 250, /*outerRadius*/ 250, /*projected fnc*/f,
                            /*zoomX*/8.0, /*zoomY*/ 0.02, /*offsetAngleRad*/ Math.PI * 2 * curruentSecProp - Math.PI / 2,
                            /*circElmFnc*/fElmGeneratorSec, /*time*/ dateTimeInfo);

                };

                return startTicking3porjections(numPracitalPerSecond, panelName,
                        fRenderHr, fRenderMin, fRenderSec);

            }

            /**
             seconds dial at center and longest, and corsses 2 others. etc. 
             all are pointing out 
             * **/
            function start3CircCrossingAllOut(numPracitalPerSecond, panelName) {

                var dsnParmatsHr = {
                    radiusNormal: 2,
                    radiusFullHr: 4,
                    dfltClr: "#FFFFFF"
                };
                var fHrElm = fCircElmNoColorHrSec.bind(dsnParmatsHr);

                var prmsMin = {
                    color: "red",
                    radius: 2
                };
                var fMinElm = fElmConstant.bind(prmsMin);

                var prmsSec = {
                    color: "yellow",
                    radius: 2
                };
                var fSecElm = fElmConstant.bind(prmsSec);


                var fRenderHr = function (dateTimeInfo) {
                    var currentMinProp = dateTimeInfo.getMinutes() / 60;
                    var currentHRProp = dateTimeInfo.getHours() / 12 + currentMinProp / 12;
                    var f = fCustom1(/*scaleX*/3.0, /*scaleY*/17.0, /*decay*/ 2);

                    pojectFunctionOnRadCrd(/*panelName */panelName, /*center */[450, 400],
                            /*numSections*/ 250, /*outerRadius*/ 230, /*projected fnc*/f,
                            /*zoomX*/8.0, /*zoomY*/ 0.02, /*offsetAngleRad*/ Math.PI * 2 * currentHRProp - Math.PI / 2,
                            /*circElmFnc*/fHrElm, /*time*/ dateTimeInfo);

                };

                var fRenderMin = function (dateTimeInfo) {

                    var currentMinProp = dateTimeInfo.getMinutes() / 60;
                    var f = fCustom1(/*scaleX*/4.0, /*scaleY*/50.0, /*decay*/ 2);

                    pojectFunctionOnRadCrd(/*panelName */panelName, /*center */[450, 400],
                            /*numSections*/ 250, /*outerRadius*/ 215, /*projected fnc*/f,
                            /*zoomX*/8.0, /*zoomY*/ 0.02, /*offsetAngleRad*/ Math.PI * 2 * currentMinProp - Math.PI / 2,
                            /*circElmFnc*/fMinElm, /*time*/ dateTimeInfo);

                };

                var fRenderSec = function (dateTimeInfo) {

                    var curruentSecProp = (dateTimeInfo.getTime() % msIn1Min) / msIn1Min;
                    var f = fCustom1(/*scaleX*/4.0, /*scaleY*/100.0, /*decay*/ 2);

                    pojectFunctionOnRadCrd(/*panelName */panelName, /*center */[450, 400],
                            /*numSections*/ 250, /*outerRadius*/ 200, /*projected fnc*/f,
                            /*zoomX*/8.0, /*zoomY*/ 0.02, /*offsetAngleRad*/ Math.PI * 2 * curruentSecProp - Math.PI / 2,
                            /*circElmFnc*/fSecElm, /*time*/ dateTimeInfo);

                };

                return startTicking3porjections(numPracitalPerSecond, panelName,
                        fRenderHr, fRenderMin, fRenderSec);

            }

            $("#start").click(function () {
                clearInterval(interval);
                interval = startTickingFCst1CheckClock(ticksPerSec, "svg1");
            });

            $("#start2").click(function () {
                clearInterval(interval);
                //interval = startTicking3porjections(11, "svg1");

                interval = start3CirclesTicking(ticksPerSec, "svg1");
            });


            $("#startCrossAllOut").click(function () {
                clearInterval(interval);
                //interval = startTicking3porjections(11, "svg1");

                interval = start3CircCrossingAllOut(ticksPerSec, "svg1");
            });




            $("#stop").click(function () {
                clearInterval(interval);
            });


        </script>

        <label id=label1>label1</label>
    </body>
</html>


















a