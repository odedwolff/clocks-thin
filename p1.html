




<!doctype html>

<html lang="en">
    <head>
        <meta charset="utf-8">

        <title>The HTML5 Herald</title>
        <meta name="description" content="The HTML5 Herald">
        <meta name="author" content="SitePoint">

        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <link rel="stylesheet" href="p1.css">


        <script src="elm_rendrers.js"></script>
        <script src="projectors.js"></script>
        <script src="displace_funcs.js"></script>
        <script src="masks_ticker.js"></script>
        <!--[if lt IE 9]>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
              
        <![endif]-->
    </head>

    <body>
        <!--  <script src="js/scripts.js"></script>  -->

        <div id = root>
            <div id = buttonsPanel1>
                <button id=start class="controlButton">start</button>
                <button id=start2 class="controlButton">start2</button>
                <button id=startCrossAllOut class="controlButton">cross all out</button>
                <button id=stop	 class="controlButton">stop</button>
                <button id=next class="controlButton">next</button>
                <button id=prev	 class="controlButton">prev</button>
                <button id=g3go class="controlButton">3gs go</button>
                
                <button id=startMasks class="controlButton">startMasks</button>
                <button id=stopMasks class="controlButton">stopMasks</button>

            </div>

            <div id = svgCont>
                <div id = panel4	class = panelCls>
                    <svg id=svg1 class="gridCell1" viewBox="0 0 800 800" preserveAspectRatio="none">
                    </svg>
                </div>
            </div>


            <div id = masksContainer>
                <div id = panel5	class = panelCls>
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="1900" width="100%">
                        <g fill-rule="evenodd" fill="red" stroke="black" stroke-width="1">
                            <defs>
                                <mask id="clockMask">
                                    <rect width="100%" height="100%" fill="#fff" />
                                    <path id=pathRaySec d= "M50,50 100,100,20,87 z" fill="#000"/>
                                    <path id=pathRayMin d= "M100,50 100,100,20,87 z" fill="#000"/>
                                    <path id=pathRayHr d= "M150,50 100,100,20,87 z" fill="#000"/>
                                </mask>
                            </defs> 

                            <rect id = "backRectClk" x="50" y="50" width="600" height="900"  fill="red" />
                            <rect id = "baseRectClk" x="100" y="100" width="400" height="250"  fill="blue" mask="url(#clockMask)"/>
                        </g>

                    </svg>
                </div>
            </div>



        </div>


        <script>

            var interval;
            var ticksPerSec = 11;
            var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            var svgNS = svg.namespaceURI;

            var msIn1Min = 1000 * 60;

            var rect = document.createElementNS(svgNS, 'rect');
            rect.setAttribute('x', 5);
            rect.setAttribute('y', 30);
            rect.setAttribute('width', 70);
            rect.setAttribute('height', 40);
            rect.setAttribute('fill', 'red');


            function testAddCirclesArray(startLoc, spacing, radius, numInstances) {
                for (var i = 0; i < numInstances; i++) {
                    var circle = document.createElementNS(svgNS, 'circle');
                    circle.setAttribute('cx', startLoc[0] + i * spacing);
                    circle.setAttribute('cy', startLoc[1]);
                    circle.setAttribute('fill', 'red');
                    circle.setAttribute('r', radius);

                }
            }


            //cos(​t)*​1/​(6+​(t/​2)^​2)
            //decay must be integer !!
            function fCustom1(scaleX, scaleY, decay) {
                var f = function (x) {
                    x = x * scaleX;
                    //x = Math.abs(x);
                    return scaleY * Math.cos(x) / (6 + Math.pow(x / 2, decay));
                    //return scaleY * Math.cos(x) / (6  + (Math.pow(x/2, decay))); 
                }
                return f;
            }


            //return white regardless of angle 	
            function constantWhite(angle, currentTimeMilli) {
                return "red";
            }





            function startTickingFCst1CheckClock(numPracitalPerSecond, panelName) {

                var tick = function () {
                    var d = new Date();
                    var curruentSecProp;
                    var time;
                    d = new Date();
                    time = d.getTime();
                    curruentSecProp = (time % (1000 * 60)) / (1000 * 60);
                    $("#" + panelName).empty();
                    var f = fCustom1(/*scaleX*/4.0, /*scaleY*/33.0, /*decay*/ 2);

                    var dsnParmats = {
                        radiusNormal: 2,
                        radiusFullHr: 4,
                        mnClr: "#EC6F00",
                        hrClr: "#830000",
                        dfltClr: "#FFFFFF"
                    };

                    fElmGenerator = fCircElmColorHrSec.bind(dsnParmats);

                    pojectFunctionOnRadCrd(/*panelName */panelName, /*center */[450, 400],
                            /*numSections*/ 250, /*outerRadius*/250, /*projected fnc*/f,
                            /*zoomX*/8.0, /*zoomY*/ 0.02, /*offsetAngleRad*/ Math.PI * 2 * curruentSecProp - Math.PI / 2,
                            /*circElmFnc*/fElmGenerator, /*time*/ d);

                };
                return setInterval(tick, 1000 / numPracitalPerSecond);
            }


            function startTicking3porjections(numPracitalPerSecond, panelName,
                    fRenderHr, fRenderMin, fRenderSec) {

                var tick = function () {
                    var d = new Date();
                    $("#" + panelName).empty();
                    fRenderHr(d);
                    fRenderMin(d);
                    fRenderSec(d);


                };
                return setInterval(tick, 1000 / numPracitalPerSecond);
            }

            function start3CirclesTicking(numPracitalPerSecond, panelName) {


                //parameters for Hour elment rendering  
                var dsnParmasHr = {
                    color: "#FFFFFF",
                    radius: 1
                };
                //function fer rendering hour elements 
                var fElmGeneratorHr = fElmConstant.bind(dsnParmasHr);


                var fRenderHr = function (dateTimeInfo) {
                    var currentMinProp = dateTimeInfo.getMinutes() / 60;
                    var currentHRProp = dateTimeInfo.getHours() / 12 + currentMinProp / 12;
                    var f = fCustom1(/*scaleX*/4.0, /*scaleY*/33.0, /*decay*/ 2);

                    pojectFunctionOnRadCrd(/*panelName */panelName, /*center */[450, 400],
                            /*numSections*/ 250, /*outerRadius*/ 78, /*projected fnc*/f,
                            /*zoomX*/8.0, /*zoomY*/ 0.02, /*offsetAngleRad*/ Math.PI * 2 * currentHRProp - Math.PI / 2,
                            /*circElmFnc*/fElmGeneratorHr, /*time*/ dateTimeInfo);

                };

                //minutes elements parameters
                var dsnParmasMn = {
                    color: "#FFFFFF",
                    radius: 2
                };
                //minutes element rendering funciton 
                var fElmGeneratorMin = fElmConstant.bind(dsnParmasMn);

                var fRenderMin = function (dateTimeInfo) {

                    var currentMinProp = dateTimeInfo.getMinutes() / 60;
                    var f = fCustom1(/*scaleX*/4.0, /*scaleY*/33.0, /*decay*/ 2);

                    pojectFunctionOnRadCrd(/*panelName */panelName, /*center */[450, 400],
                            /*numSections*/ 250, /*outerRadius*/ 150, /*projected fnc*/f,
                            /*zoomX*/8.0, /*zoomY*/ 0.02, /*offsetAngleRad*/ Math.PI * 2 * currentMinProp - Math.PI / 2,
                            /*circElmFnc*/fElmGeneratorMin, /*time*/ dateTimeInfo);

                };


                //seconds element parameters
                var dsnParmatsSec = {
                    radiusNormal: 2,
                    radiusFullHr: 4,
                    dfltClr: "#FFFFFF"
                };
                //seconds element rendering function 

                fElmGeneratorSec = fCircElmNoColorHrSec.bind(dsnParmatsSec);
                var fRenderSec = function (dateTimeInfo) {

                    var curruentSecProp = (dateTimeInfo.getTime() % msIn1Min) / msIn1Min;
                    var f = fCustom1(/*scaleX*/4.0, /*scaleY*/33.0, /*decay*/ 2);

                    pojectFunctionOnRadCrd(/*panelName */panelName, /*center */[450, 400],
                            /*numSections*/ 250, /*outerRadius*/ 250, /*projected fnc*/f,
                            /*zoomX*/8.0, /*zoomY*/ 0.02, /*offsetAngleRad*/ Math.PI * 2 * curruentSecProp - Math.PI / 2,
                            /*circElmFnc*/fElmGeneratorSec, /*time*/ dateTimeInfo);

                };

                return startTicking3porjections(numPracitalPerSecond, panelName,
                        fRenderHr, fRenderMin, fRenderSec);

            }

            /**
             seconds dial at center and longest, and corsses 2 others. etc. 
             all are pointing out 
             * **/
            function start3CircCrossingAllOut(numPracitalPerSecond, panelName) {

                var dsnParmatsHr = {
                    radiusNormal: 2,
                    radiusFullHr: 4,
                    dfltClr: "#FFFFFF"
                };
                var fHrElm = fCircElmNoColorHrSec.bind(dsnParmatsHr);

                var prmsMin = {
                    color: "red",
                    radius: 2
                };
                var fMinElm = fElmConstant.bind(prmsMin);

                var prmsSec = {
                    color: "yellow",
                    radius: 2
                };
                var fSecElm = fElmConstant.bind(prmsSec);


                var fRenderHr = function (dateTimeInfo) {
                    var currentMinProp = dateTimeInfo.getMinutes() / 60;
                    var currentHRProp = dateTimeInfo.getHours() / 12 + currentMinProp / 12;
                    var f = fCustom1(/*scaleX*/3.0, /*scaleY*/17.0, /*decay*/ 2);

                    pojectFunctionOnRadCrd(/*panelName */panelName, /*center */[450, 400],
                            /*numSections*/ 250, /*outerRadius*/ 230, /*projected fnc*/f,
                            /*zoomX*/8.0, /*zoomY*/ 0.02, /*offsetAngleRad*/ Math.PI * 2 * currentHRProp - Math.PI / 2,
                            /*circElmFnc*/fHrElm, /*time*/ dateTimeInfo);

                };

                var fRenderMin = function (dateTimeInfo) {

                    var currentMinProp = dateTimeInfo.getMinutes() / 60;
                    var f = fCustom1(/*scaleX*/4.0, /*scaleY*/50.0, /*decay*/ 2);

                    pojectFunctionOnRadCrd(/*panelName */panelName, /*center */[450, 400],
                            /*numSections*/ 250, /*outerRadius*/ 215, /*projected fnc*/f,
                            /*zoomX*/8.0, /*zoomY*/ 0.02, /*offsetAngleRad*/ Math.PI * 2 * currentMinProp - Math.PI / 2,
                            /*circElmFnc*/fMinElm, /*time*/ dateTimeInfo);

                };

                var fRenderSec = function (dateTimeInfo) {

                    var curruentSecProp = (dateTimeInfo.getTime() % msIn1Min) / msIn1Min;
                    var f = fCustom1(/*scaleX*/4.0, /*scaleY*/100.0, /*decay*/ 2);

                    pojectFunctionOnRadCrd(/*panelName */panelName, /*center */[450, 400],
                            /*numSections*/ 250, /*outerRadius*/ 200, /*projected fnc*/f,
                            /*zoomX*/8.0, /*zoomY*/ 0.02, /*offsetAngleRad*/ Math.PI * 2 * curruentSecProp - Math.PI / 2,
                            /*circElmFnc*/fSecElm, /*time*/ dateTimeInfo);

                };

                return startTicking3porjections(numPracitalPerSecond, panelName,
                        fRenderHr, fRenderMin, fRenderSec);

            }


            function startTicking3GsOn2(numPracitalPerSecond, panelName) {

                var step = function () {
                    var dateTimeInfo = new Date();
                    var currentMinProp = dateTimeInfo.getMinutes() / 60;
                    var currentHRProp = dateTimeInfo.getHours() / 12 + currentMinProp / 12;
                    var curruentSecProp = (dateTimeInfo.getTime() % msIn1Min) / msIn1Min;
                    //gaus1
                    var context1 = {
                        width: 1.1,
                        height: 20
                    };
                    fDispGaus1 = gausianBump.bind(context1);

                    //gaus2
                    var context2 = {
                        width: .5,
                        height: -40
                    };
                    fDispGaus2 = gausianBump.bind(context2);


                    //gaus3
                    var context3 = {
                        width: .5,
                        height: -20
                    };
                    fDispGaus3 = gausianBump.bind(context3);

                    var funcs = [fDispGaus1, fDispGaus2, fDispGaus3];
                    var correctOffset = -Math.PI / 2;
                    var offsets = [2 * Math.PI * currentMinProp + correctOffset, 2 * Math.PI * currentHRProp + correctOffset, 2 * Math.PI * curruentSecProp + correctOffset];


                    //element rendrer
                    context = {
                        color: "#FFFFFF",
                        radius: 1
                    };
                    //function fer rendering hour elements 
                    var fElmGenerator = fElmConstant.bind(context);

                    $("#" + panelName).empty();
                    pojectMultFunctionsOnRadCrd(/*panelName */"svg1", /*center */[450, 400],
                            /*numSections*/ 250, /*outerRadius*/ 78, /*projected fnc*/funcs,
                            /*zoomX*/8.0, /*zoomY*/ 0.02, /*offsetAngleRad*/ offsets,
                            /*circElmFnc*/fElmGenerator, /*time*/ null);
                };

                return setInterval(step, 1000 / numPracitalPerSecond);


            }
            
            function startMasksClock(){
               $("#svgCont").hide(); 
               $("#masksContainer").show(); 
                
            }
            
            function stopMasksClock(){
                $("#svgCont").show(); 
                $("#masksContainer").hide(); 
                
            }
            
            $("#startMasks").click(startMasksClock);
            
            $("#stopMasks").click(stopMasksClock);  
            


            $("#start").click(function () {
                clearInterval(interval);
                interval = startTickingFCst1CheckClock(ticksPerSec, "svg1");
            });

            $("#start2").click(function () {
                clearInterval(interval);
                //interval = startTicking3porjections(11, "svg1");

                interval = start3CirclesTicking(ticksPerSec, "svg1");
            });


            $("#startCrossAllOut").click(function () {
                clearInterval(interval);
                //interval = startTicking3porjections(11, "svg1");

                interval = start3CircCrossingAllOut(ticksPerSec, "svg1");
            });

            $("#g3go").click(function () {
                clearInterval(interval);
                //interval = startTicking3porjections(11, "svg1");

                interval = startTicking3GsOn2(ticksPerSec, "svg1");
            });








            $("#stop").click(function () {
                clearInterval(interval);
            });
            
            
            startMaskTicking(); 


        </script>

        <label id=label1>label1</label>
    </body>
</html>


















a